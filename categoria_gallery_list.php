<?php require_once('config.php'); require_once(PATH_ROOT_CLASES . 'ccategoria_gallery.php'); require_once(PATH_ROOT_CLASES . 'cform_construct_categoria_gallery.php'); require_once(PATH_ROOT_CLASES . 'cpagelayout_frontend.php'); require_once(PATH_ROOT_CLASES . 'cutils.php'); require_once(PATH_ROOT_CLASES . 'ccategoria.php'); require_once(PATH_ROOT_CLASES . 'cimagen.php');  //#NO-BORRAR#////Recojemos la pagina actual$pag  = Cutils::get_filtered_params('pag', 0, 0, 1, 0); if ($pag == 0) $pag = 1;//recogemos categoria que puede ser un stripped o un id if ( isset( $_REQUEST['categoria_id']) or isset( $_REQUEST['cformcategoria_gallery_categoria_id'] ) ){ 	$categoria_id  = Cutils::get_filtered_params('categoria_id', 1, 0, 1, 0); 	$return  =  $categoria_id;}else if ( isset( $_REQUEST['stripped']) ){ 	$stripped = Cutils::get_filtered_params('stripped', 1, 0, 1, 0); 	$categoria_id = Ccategoria::get_id_from_stripped($stripped); 	$return = $stripped; } //Creamos un array con los parametros que se enviaran a traves del paginado $params_get = array();// Definimos las seccins del layout $names_section = array( 	'top' 			=> 	'vtop', 	'menu' 			=> 	'vmenu',  	'main' 			=> 	'vcategoria_gallery_list', 	'footer'		=>	'vfooter' );$metas = array('nocache'=>'' );$layout	= new Cpagelayout_frontend( $names_section ); 	$layout->set_page_metas($metas);	$item_array = Ccategoria_gallery::item_list($categoria_id, MAX_ITEMS, $pag);	$paginate = new Cpaginado(MAX_ITEMS,$pag,$item_array['total'],$params_get, 'frontend'); 	$paginat_box = $paginate->RetornaPaginatLlistat('',false); 	$layout->set_var('item', $item_array['item']);	$layout->set_var('return', $return);	$layout->set_var('rid', $categoria_id);	$layout->set_var('paginate', $paginat_box);$layout->Display();?>