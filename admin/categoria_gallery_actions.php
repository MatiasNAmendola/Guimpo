<?php require_once('../config.php'); require_once(PATH_ROOT_CLASES . 'ccategoria_gallery.php'); require_once(PATH_ROOT_CLASES . 'cdatabase.php'); require_once(PATH_ROOT_CLASES . 'cutils.php');  $action = Cutils::get_filtered_params('a', 1, 0, 1, 0); //Recojemos el id del usuario a verif ( isset( $_REQUEST['id']) )	$id  = Cutils::get_filtered_params('id', 1, 0, 1, 0);else{	$stripped = Cutils::get_filtered_params('stripped', 1, 0, 1, 0);	$id = Ccategoria_gallery::get_id_from_stripped($stripped);}//Miramos si existe. Si no existe enviamos a list$categoria_gallery = new Ccategoria_gallery($id);if (!$categoria_gallery->exists()){	Cutils::set_web_information(0, 'El item no existe o ha sido eliminado de la base de datos');	Clocation::header_location('/admin/categoria_gallery/list/');}//recogemos la relacion que puede ser un stripped o un id if ( isset( $_REQUEST['categoria_id']) or  isset( $_REQUEST['cformcategoria_gallery_categoria_id'] ) ){ 	$categoria_id  = Cutils::get_filtered_params('categoria_id', 1, 0, 1, 0); 	$return  =  $categoria_id;}else if ( isset( $_REQUEST['stripped']) ){ 	$stripped = Cutils::get_filtered_params('stripped', 1, 0, 1, 0); 	$categoria_id = Ccategoria::get_id_from_stripped($stripped); 	$return = $stripped; } if ($action == 'delete'){	$item = new Ccategoria_gallery($id);	$result = $item->delete();		if ($result){			$info_ok = 1; 			$info_msg = 'Eliminado correctamente'; 			Cutils::set_web_information($info_ok, $info_msg); 			Clocation::header_location('/admin/categoria_gallery/list/'.$return.'/'); 		}else{			$info_ok = 0; 			$info_msg = 'Error eliminando'; 			Cutils::set_web_information($info_ok, $info_msg); 			Clocation::header_location('/admin/categoria_gallery/list/'.$return.'/'); 		}	}?>