<?php require_once('config.php'); require_once(PATH_ROOT_CLASES . 'cchangepass.php'); require_once(PATH_ROOT_CLASES . 'cusers.php'); require_once(PATH_ROOT_CLASES . 'cform_construct_changepass.php'); require_once(PATH_ROOT_CLASES . 'cpagelayout_frontend.php'); require_once(PATH_ROOT_CLASES . 'cutils.php');  // Definimos las seccins del layout $names_section = array( 	'top' 			=> 	'vtop', 	'menu' 			=> 	'vmenu',  	'main' 			=> 	'vchangepass_create', 	'footer'		=>	'vfooter' );//recogimos el hash y lo validamosif ( isset($_REQUEST['hash']) )	$hash = Cutils::get_filtered_params('hash', 1, 0, 1, 0);else 	$hash = Cutils::get_filtered_params('cformchangepass_hash', 1, 0, 1, 0);$valid = Cusers::check_hash_change_email($hash);if ($valid){	} else {	Clocation::header_location('/login/');}//incluimos el formulario de usuarios y lo aÃ±adimos al array de formularios$newform = new Cform_construct_changepass('cformchangepass','es','new', '',$hash);$array_forms['cformchangepass'] = $newform; //incluimos la validacion por javascript$heredoc = Cutils::get_scripts_heredoc_form_validation($array_forms, 'repassword');$layout	= new Cpagelayout_frontend( $names_section ); 	$layout->set_page_link_blocker(true);	$layout->set_page_forms($array_forms);	$layout->set_page_heredoc($heredoc);	$layout->set_var('form_type', 'new');$layout->Display();?>